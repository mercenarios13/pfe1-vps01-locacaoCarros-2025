<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Locação</title>
    <link href="https://fonts.googleapis.com/css2?family=Courier:wght@400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Courier', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        header {
            background-color: #003366;
            color: #fff;
            text-align: center;
            padding: 20px;
            width: 100%;
        }
        main {
            padding: 20px;
            background-color: #ffffff;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            font-size: 1.2em;
            margin-bottom: 5px;
            display: block;
        }
        input, select {
            width: 100%;
            padding: 10px;
            font-size: 1em;
            border-radius: 4px;
            border: 1px solid #ccc;
            margin-top: 5px;
            box-sizing: border-box;
        }
        button {
            background-color: #006699;
            color: white;
            padding: 10px 20px;
            font-size: 1.2em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background-color: #00CCFF;
        }
        .erro {
            color: red;
            font-size: 0.9em;
            display: none;
        }
        .carro-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .carro-item img {
            width: 50px;
            height: auto;
            margin-right: 10px;
        }
        .carro-item span {
            font-size: 1.1em;
            flex: 1;
        }
        .carro-item input {
            margin-right: 10px;
        }
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .form-actions button {
            width: 48%;
        }
    </style>
</head>
<body>
    <header>
        <h1>Cadastro de Locação de Carro</h1>
    </header>

    <main>
        <form id="form-locacao">
            <div class="form-group">
                <label for="nome">Nome do Cliente:</label>
                <input type="text" id="nome" required>
            </div>
            <div class="form-group">
                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" required maxlength="11" oninput="validarCPF()">
                <span id="erro-cpf" class="erro">CPF inválido.</span>
            </div>
            <div class="form-group">
                <label for="data-inicio">Data de Início:</label>
                <input type="date" id="data-inicio" required>
            </div>
            <div class="form-group">
                <label for="data-fim">Data de Fim:</label>
                <input type="date" id="data-fim" required>
            </div>
            <div class="form-group">
                <label for="carro">Escolha o Carro:</label>
                <div id="carro" required>
                    <!-- Carros serão carregados dinamicamente aqui -->
                </div>
            </div>

            <div class="form-actions">
                <button type="submit">Finalizar Locação</button>
                <button type="button" onclick="voltar()">Voltar</button>
            </div>
        </form>
    </main>

    <script>
        // Carregar carros disponíveis
        const carros = [
            { id: 1, modelo: "Onix LT 1.0", marca: "Chevrolet", ano: 2022, imagem: "img/onix.jpg", valor_diaria: 120.00 },
            { id: 2, modelo: "HB20 Vision", marca: "Hyundai", ano: 2023, imagem: "img/HB20.jpg", valor_diaria: 150.00 },
            { id: 3, modelo: "Renegade Longitude", marca: "Jeep", ano: 2023, imagem: "img/Renegade.jpg", valor_diaria: 210.00 },
            { id: 4, modelo: "Corolla XEi", marca: "Toyota", ano: 2022, imagem: "img/corolla.jpg", valor_diaria: 250.00 },
            { id: 5, modelo: "Civic Touring", marca: "Honda", ano: 2021, imagem: "img/civic.jpg", valor_diaria: 230.00 },
            { id: 6, modelo: "Fiat Mobi Like", marca: "Fiat", ano: 2022, imagem: "img/mobi.jpg", valor_diaria: 90.00 },
            { id: 7, modelo: "Kwid Zen", marca: "Renault", ano: 2023, imagem: "img/kwid.jpg", valor_diaria: 95.00 },
            { id: 8, modelo: "Gol Trendline", marca: "Volkswagen", ano: 2021, imagem: "img/gol.jpg", valor_diaria: 100.00 },
            { id: 9, modelo: "Compass Limited", marca: "Jeep", ano: 2022, imagem: "img/compass.jpg", valor_diaria: 270.00 },
            { id: 10, modelo: "Tracker Premier", marca: "Chevrolet", ano: 2023, imagem: "img/tracker.jpg", valor_diaria: 220.00 }
        ];

        // Função para popular os carros com imagens e botões de seleção
        function carregarCarros() {
            const divCarro = document.getElementById('carro');
            carros.forEach(carro => {
                const divItem = document.createElement('div');
                divItem.classList.add('carro-item');

                const img = document.createElement('img');
                img.src = carro.imagem;  // Caminho da imagem do carro
                img.alt = carro.modelo;
                
                const texto = document.createElement('span');
                texto.textContent = `${carro.modelo} (${carro.marca} - ${carro.ano}) - R$ ${carro.valor_diaria.toFixed(2)}`;

                const inputRadio = document.createElement('input');
                inputRadio.type = "radio";
                inputRadio.name = "carro";
                inputRadio.value = carro.id;

                divItem.appendChild(inputRadio);
                divItem.appendChild(img);
                divItem.appendChild(texto);
                divCarro.appendChild(divItem);
            });
        }

        // Função de validação de CPF
        function validarCPF() {
            const cpf = document.getElementById('cpf').value;
            const erroCPF = document.getElementById('erro-cpf');
            if (cpf.length === 11 && !isNaN(cpf)) {
                erroCPF.style.display = 'none';
            } else {
                erroCPF.style.display = 'inline';
            }
        }

        // Função para salvar os dados no LocalStorage
        function salvarLocacao(event) {
            event.preventDefault();
            const nome = document.getElementById('nome').value;
            const cpf = document.getElementById('cpf').value;
            const dataInicio = document.getElementById('data-inicio').value;
            const dataFim = document.getElementById('data-fim').value;
            const carroId = document.querySelector('input[name="carro"]:checked').value;
            const carroSelecionado = carros.find(carro => carro.id == carroId);

            if (cpf.length === 11 && !isNaN(cpf)) {
                const locacao = { nome, cpf, dataInicio, dataFim, carro: carroSelecionado };
                let locacoes = JSON.parse(localStorage.getItem('locacoes')) || [];
                locacoes.push(locacao);
                localStorage.setItem('locacoes', JSON.stringify(locacoes));
                alert("Locação cadastrada com sucesso!");
                window.location.href = "index.html"; // Redirecionar para a página principal
            } else {
                alert("CPF inválido!");
            }
        }

        // Função para voltar para a página anterior
        function voltar() {
            window.location.href = "index.html"; // Voltar para a página principal
        }

        // Evento de submissão do formulário
        document.getElementById('form-locacao').addEventListener('submit', salvarLocacao);

        // Carregar carros ao carregar a página
        window.onload = carregarCarros;
    </script>
</body>
</html>
